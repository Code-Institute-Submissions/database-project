{% extends 'base.html'%} {% block content %}
<div class="container-fluid">
	<div class="row">
		<div class="d-none d-md-block col-md-1 no-padding">
			<img src="{{url_for('static', filename='images/background/side_ad.png')}}" width="100%" height="100%" alt="side-advert" data-toggle="modal" data-target="#contactModal" display>
		</div>
		<div class="offset-1 col-10 offset-md-0 col-md-10">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{url_for('home')}}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{{url_for('marketplace')}}">Marketplace</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ tittle }}</li>
                </ol>
            </nav>
			<div class="d-flex justify-content-center">
				<a class="btn btn-outline-light btn-motors"	href="{{url_for('motors_and_vehicles')}}" data-toggle="tooltip" title="Motors and vehicles">Motors</a>
				<a class="btn btn-outline-light btn-home" href="{{url_for('home_garden_diy')}}" data-toggle="tooltip" title="Home, garden and DIY">Home</a>
				<a class="btn btn-outline-light btn-pc" href="{{url_for('electronics')}}" data-toggle="tooltip" title="Electronic, mobile and PC">Electronics</a>
			</div>
			<div class="search-bar d-flex justify-content-center">
				<div class="row search-outline search-outline-home">
					<form action="{{url_for('search')}}">
						<input id="search" name="search" type="text" class="validate home-search" placeholder="Search by name and press enter key" required>
                    </form>
                    <button id="more-filters" class="btn btn-outline-light open-filters text-center">Open filters</button>
				</div>
			</div>
            <div class="row d-flex justify-content-center text-center">
                <form action="{{url_for('county_search')}}" method="POST" enctype="multipart/form-data">                    
                    <div class="search-filter">
                    <select class="input-field add-inputs search-filter-input" id="category" name="category_name" required>
                        <option value="" disabled selected>Choose category</option>
                        {% for cat in categories %}
                        <option value="{{cat.category_name}}" required>{{cat.category_name}}</option>
                        {% endfor %}
                    </select>                    
                    <select class="input-field add-inputs search-filter-input" id="county" name="county" required>
                    <option value="" disabled selected>Choose county</option>
                    {% for county in counties %}
                    <option value="{{county.name}}" required>{{county.name}}</option>
                    {% endfor %}
                    </select>
                    <div>
                    <button class="btn btn-dark btn-search" type="submit">Search</button>
                    </div>
                    </div>
                </form>
            </div>
			<div class="marketplace-form">
				<div class="row">
					{% if results_number == 0 %}
						<div class="col-12">
							<a href="{{url_for('home')}}" >
                                <img src="{{url_for('static', filename='images/background/404.png')}}" width="100%" height="750px" alt="404">
                            </a>
                        </div>								
					{% else %}
					{% for result in results %}
						<div class="col-8 col-sm-6 col-md-4 col-lg-3">
							<div class="card" data-toggle="tooltip" title="Click to see full details">
								<a href="{{url_for('view_advert', advert_id=result._id)}}" class="btn no-padding">
									<img src="{{url_for('file', filename=result['imageURL'])}}" class="card-img-top" width="200px" height="200px" alt="{{result.advert_name}}">
										<div class="card-body">
                                            <div class="row">
                                                <div class="col-9 no-padding-right">
											        <p class="card-title">{{result.advert_name.capitalize()}}</p> 
                                                </div>
                                                <div class="col-3 no-padding text-left">
											        <p class="margin-top">
                                                        <img src="{{url_for('static', filename='images/logo/view.png')}}" width="10px" height="10px" alt="Views">  {{result.views}}
                                                    </p>
                                                </div>
										    </div>
											<div class="row">
												<div class="col-7 no-padding-right location">
													<p class="card-text">{{result.location}}</p>
												</div>
                                                <div class="col-5 no-padding">
                                                    <p class="card-text price">â‚¬ {{result.price}}</p>
												</div>												
											</div>
										</div>                                        
								</a>
							</div>
						</div>
					{% endfor %}
					{% endif %}
			    </div>
                        <div class="text-right">
                <a class="btn btn-outline-secondary" href="#nav">Go to top</a>
                </div>
			</div>
            <div>
				<div aria-label="" class="card-sm">
					<ul class="pagination justify-content-center">
						{% if page > 1 %}
							<li class="page-item">
								<a class="page-link" href="{{url_for('marketplace', page=page-1)}}"	aria-label="Previous">
									<span aria-hidden="true">&laquo;</span>
									<span class="sr-only">Previous</span>
								</a>
							</li>
						{% endif %}
						{% for pag in pages %}
							{% if pag == page %}
							<li class="page-item active" aria-current="page">
								<a class="page-link" href="#">{{ pag }}
                                    <span class="sr-only">(current)</span>
                                </a>
							</li> 
                            {% else %}
							<li class="page-item">
								<a class="page-link" href="{{url_for('marketplace', page=pag)}}">{{ pag }}</a>
							</li>
							{% endif %}
						{% endfor %}
						{% if page < total %}
							<li class="page-item">
								<a class="page-link" href="{{url_for('marketplace', page=page+1)}}" aria-label="Next">
									<span aria-hidden="true">&raquo;</span>
									<span class="sr-only">Next</span>
								</a>
							</li>
						{% endif %}
					</ul>
				</div>
			</div>
		</div>
		<div class="d-none d-md-block col-md-1 no-padding">
			<img src="{{url_for('static', filename='images/background/side_ad.png')}}" width="100%" height="100%" alt="side-advert" data-toggle="modal" data-target="#contactModal" display>
		</div>
	</div>
</div>
{% endblock %}